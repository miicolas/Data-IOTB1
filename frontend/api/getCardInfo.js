// recupere l'id de la carte dans l'url http://localhost:3000/cardinfo.html?card=albusdumbledore
const urlParams = new URLSearchParams(window.location.search); // Récupère les paramètres de l'URL
const cardId = urlParams.get("card"); // Récupère la valeur du paramètre "card"
console.log(cardId);

fetch("/searchcard?card=" + cardId)
  .then((response) => response.json())
  .then((data) => {
    console.log(data);
    let gallery = document.querySelector(".card_container");

    gallery.innerHTML += `
      <div class="container_cardinfo">
      <div class="container_image">
          <img class="card_image"
            src="../img/cartes/${data.id_card}.jpg"
            alt="${data.name}"
          />
      </div> 
      <div class="container_info">
        <div class="content_info_name">${data.name}</div>
          <div class="content_info_container">
          <div class="content_info">
              <div class="content_info_icon"> 
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M196.73 35.23c-8.132.878-16.3 1.936-24.515 3.172C192.968 50.21 212.045 66.795 224 96c-24.896-22.512-44.232-39.5-75.795-53.512-8.808 1.676-17.69 3.562-26.656 5.64 22.69 10.745 49.026 26.094 75.114 51.306-57.456-25.454-81.792-31.066-120.23-39.4C64.33 63.598 52.03 67.5 39.5 71.743c54.813 3.532 103.127 19.644 187.346 47.717l2.015.673 1.503 1.504c5.794 5.793 15.356 9.254 25.203 9.353-2.725-39.43-18.787-67.802-58.836-95.76zm118.54 0c-40.05 27.958-56.11 56.33-58.836 95.76 9.847-.1 19.41-3.56 25.203-9.353l1.502-1.504 2.014-.672C369.374 91.39 417.687 75.277 472.5 71.745c-12.53-4.243-24.83-8.145-36.934-11.71-38.438 8.334-62.774 13.946-120.23 39.4 26.088-25.212 52.424-40.56 75.115-51.307-8.964-2.077-17.847-3.963-26.655-5.64-31.563 14.014-50.9 31-75.795 53.513 11.954-29.205 31.032-45.79 51.785-57.598-8.216-1.236-16.383-2.294-24.515-3.172zM25 89.287v301.758c44.68.19 106.01 16.813 190 44.498v-301.04C128.034 105.534 81.67 90.71 25 89.288zm462 0c-56.67 1.423-103.034 16.246-190 45.217v301.05c84.317-27.698 143.413-42.5 190-44.2V89.287zm-254 55.195v200.325c15.47 3.1 30.71 3.292 46 .097V144.482c-7.227 3.058-15.14 4.518-23 4.518-7.86 0-15.773-1.46-23-4.518zm0 218.627v13.933c15.296 3.488 30.512 3.284 46-.1V363.22c-15.37 2.728-30.764 2.543-46-.11zm46 32.185c-15.226 2.856-30.633 3.058-46 .125v48.838c3.222 3.24 5.775 5.876 8.365 7.56 3.283 2.136 6.77 3.49 14.274 3.19l.18-.008h.18c11.61 0 15.954-4.04 23-10.836v-48.87z" fill="#fff" fill-opacity="1"></path></g></svg>            </div> 
              <p>${data.description}</p> 
            </div>
            <div class="content_info">
              <div class="content_info_icon"> 
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M50 96c-9.972 0-18 8.028-18 18v300c0 9.972 8.028 18 18 18h412c9.972 0 18-8.028 18-18V114c0-9.972-8.028-18-18-18H50zm5 23h402v18H55v-18zm0 32h210v258H55V151zm18 18v222h7.03c.47-24.342 18.315-74.172 47.093-97.889C136.331 300.56 147.615 305 160 305c12.385 0 23.669-4.44 32.877-11.889C221.655 316.828 239.5 366.658 239.97 391H247V169H73zm222 14h146v18H295v-18zm-135 10c20.835 0 39 20.241 39 47s-18.165 47-39 47-39-20.241-39-47 18.165-47 39-47zm135 22h114v18H295v-18zm0 32h50v18h-50v-18zm80 0h66v18h-66v-18zm-16 96h98v18h-98v-18zm-32 32h130v18H327v-18z" fill="#fff" fill-opacity="1"></path></g></svg>            
              </div> 
              <p>${data.id_card}</p> 
            </div>
            <div class="content_info">
              <div class="content_info_icon"> 
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M133.2 25l-53.69 94H432.5l-53.7-94H133.2zM25 137v46h462v-46H25zm32 64v46h46v-46H57zm352 0v46h46v-46h-46zm-171.4.6s-22 8.8-24 18.8c-4.6 22.8 33.9 60.8 33.9 60.8s-13.3-34.6-14.3-52.8c-.5-9.1 4.4-26.8 4.4-26.8zm54.4 14.8c-6.1 40.2-11.2 83.7-45.9 100.2-30.3 14.4-36.4-78.5-94.1-91.5 44.9 101.1-68.9 139.9 42.2 185.2h19.5c-24-25.9-34.4-90.8-34.4-90.8s30.2 72 62.5 74.2c15 1 33.5-30.2 33.5-30.2s5.9 29.8-.1 46.8H319c27.3-14.8 44.6-35.7 51.2-57.3 6.5-20.9 3-42.5-10.9-59.9-8.6 51.8-21.4 62.8-55.1 74.1 36.6-44.7 20.2-119.2-12.2-150.8zM57 265v46h46v-46H57zm352 0v46h46v-46h-46zM57 329v78h46v-78H57zm352 0v78h46v-78h-46zM25 425v62h462v-62H25z" fill="#fff" fill-opacity="1"></path></g></svg>
              </div> 
              <p>${data.house}</p> 
            </div>
            
            
            <div class="content_info">
              <div class="content_info_icon"> 
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M366.9 36.88c-49.5 6.81-66 65.52-55.2 104.52 13.8 49.7-46.5 54.2-33.3-24.7-17.5 28.4-22.4 53.7-18.6 74.9 3.7 21.3 14.7 37.7 29.8 49.6 9.5 7.5 20.6 13.3 32.5 17 27.2-25.1 31.2-69.5 18.2-98.4 19.3 12.1 30.3 35.4 28.9 62.5 11.9.7 27.2-6.8 36.4-17.8.4 19 2.3 34.7-8.9 52.4 28.5-10.9 64.3-36.2 65.7-51.2 1.4-15.7-1.5-34.2-8.3-55.7-17.1 66.8-77.4 39.6-42.6-45.4-61.7 53.6-69.5-11.1-44.6-67.72zm116.8 2.09c-8 13.23-16 34.87-45.9 32.25 20.5 22.17 20.4 33.78 11.8 63.88 37.2-31.9 37.8-67.34 34.1-96.13zM205.4 75.8c-28.1-.1-49.9 56.5-57.7 90.6-11.3 49.2-14.6 83.5-.9 133l-17.3 4.8c-15.5-55.9-8.3-94.7 2.3-142.3 10.5-47.6 14.5-70.4-4.5-74.1-42.1-8.4-45.3 90.4-47.8 134.8-1.4 25.8.8 57 6.6 77.6l-16.9 6.2c-14.4-53.4-6.7-98-1.7-150.8 2.5-15.6-1.8-25.7-19.1-25.2-15.8.5-27 143.4-13.3 179.1 8.7 53 31.3 130.5 11 152.7L18 494h206l20-28.6c23-5 28.4-19.9 37-33.8 25.3-40.9 82.4-83.1 129.1-99.2 21.1-7.5-21.9-48.6-53.8-32.8-55 27.2-81.7 56.3-117.8 38.3-55.9-27.8-47.3-100.6-35.9-162.8 6.2-33.6 40.4-89.6 7.2-98.8-1.4-.32-2.9-.49-4.4-.5z" fill="#fff" fill-opacity="1"></path></g></svg>          </div> 
              <p>${data.power}</p> 
            </div>
            <div class="content_info">
              <div class="content_info_icon"> 
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="height: 1.5rem; width:1.5rem;"><g class="" transform="translate(0,0)" style=""><path d="M157 21.234v16h18v-16zm180 0v16h18v-16zM153 55.232v62.002h206V55.232zm-3.89 80c-26.567 5.315-53.134 10.626-79.7 15.942l3.531 17.648L87 166.01v80.222h18V162.41l52-10.4v45.224h18v-62.002zm187.89 0v62.002h18V152.01l52 10.4v83.822h18V166.01l14.059 2.812 3.53-17.648c-26.565-5.315-53.132-10.628-79.698-15.942zm-174 80l-40.004 30.002h266.008L349 215.232zm-69.836 48l118.363 82.854c-37.367 27.406-74.74 54.805-112.105 82.213l10.642 14.514 18.743-13.745-8.008 20.823-37.332 26.13 10.322 14.745L256 377.216c54.07 37.851 108.142 75.698 162.21 113.55l10.323-14.745-37.332-26.13-8.008-20.823 18.743 13.745 10.642-14.514c-37.367-27.406-74.737-54.809-112.105-82.213l118.363-82.854h-31.383l-102.307 71.616-13.927-10.215 83.728-61.4H324.51L256 313.472l-68.51-50.24h-30.437l83.728 61.4-13.927 10.215-102.307-71.616zM256 335.793l13.574 9.955L256 355.25l-13.574-9.502zm-28.9 21.193l13.209 9.246-93.125 65.188 8.48-22.047zm57.8 0l71.436 52.387 8.48 22.047-93.125-65.186z" fill="#fff" fill-opacity="1"></path></g></svg>        </div> 
              <p>${data.actor}</p> 
            </div>
           
          </div>
        </div>
      </div>  
  `;
  fetch("/iot/updateLastVisited", {
    method: "POST",
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ lastVisited: data.house })

  })
  })

  

  .catch((error) => {
    console.error("Error fetching data:", error);
  });




